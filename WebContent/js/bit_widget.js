(function(){var t=["1","1","0"].join(".");this.BIT=this.BIT||{};var n=this.BIT,r=Array.prototype.slice,i=function(e,t,r){if(e==null)return;if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(t,r);else if(n.Utils.Object.isArray(e))for(var i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)},s=function(e,t,n){for(var r in t)if(typeof e[r]=="undefined"||n)e[r]=t[r];return e},o=function(e){var t=n,r=e?e.split("."):[];for(var i=0,s=r.length;i<s;i++){var o=r[i],u=t[o];u||(u={},t[o]=u),t=u}return t},u=function(e,t){var r=typeof e=="string"?n.createObj(e):e;return s(r,t)};n.copy=s,n.createObj=o,n.extend=u;var a=document.location.protocol=="https:"?"https:":"http:";s(n,{baseUrl:a+"//www.bandsintown.com",apiBaseUrl:a+"//api.bandsintown.com",assetHost:a+"//d38hmgjgf0kofx.cloudfront.net",widgets:[],widgetDialogEnabled:!0,iOSBannerEnabled:!1,cameFromCodes:{fbShare:36,noTourDatesNotifyMe:38,rsvp:39,eventDetails:46,buyTickets:166,trackArtistHeader:176,customTickets:219}}),s(n,{findWidget:function(e){e=e.toString().replace(/[^\d]+/,"");for(var t=0,n=this.widgets.length;t<n;t++)if(this.widgets[t].timestamp==e)return this.widgets[t]},setup:function(e){this.setupIOSBanner(e.src)},setupIOSBanner:function(e){var t=/ios_banner_disabled=true/.test(e);if(t||!n.iOSBannerEnabled||n.iOSBannerRendered||!n.Utils.Browser.iOS)return;var r=f.make("meta",{name:"apple-itunes-app",content:"app-id=471394851,affiliate-data=partnerId=30&siteID=9HbhZwoYOY0&u1=BITWidget"});f.append(document.head,r)}}),n.extend("Utils.Color",{RGB_REGEX:/\(\s*(\d+)\W+(\d+)\W+(\d+)\s*\)/,HEX_REGEX:/[A-F0-9]+/i,rgbFromHexString:function(e){var t=e.match(this.HEX_REGEX)[0];return t.length==6?[parseInt(t.substr(0,2),16)/255,parseInt(t.substr(2,2),16)/255,parseInt(t.substr(4,2),16)/255]:[parseInt(t[0]+t[0],16)/255,parseInt(t[1]+t[1],16)/255,parseInt(t[2]+t[2],16)/255]},rgbFromRgbString:function(e){var t=e.match(/\((\d+)\W+(\d+)\W+(\d+)\)/);return[t[1]/255,t[2]/255,t[3]/255]},parseRgb:function(e){var t=[0,0,0];return e.match(this.RGB_REGEX)?t=this.rgbFromRgbString(e):e.match(this.HEX_REGEX)&&(t=this.rgbFromHexString(e)),{red:t[0],green:t[1],blue:t[2]}},whiteOrBlack:function(e){var t=this.parseRgb(e),n=.213*t.red+.715*t.green+.072*t.blue;return n<.5?"white":"black"}}),n.extend("Utils.Element",{make:function(e,t,n){var r=this.attrs(document.createElement(e),t);return n&&this.html(r,n),r},empty:function(e){while(e.firstChild)e.removeChild(e.firstChild);return e},html:function(e,t){if(typeof t=="string")try{e.innerHTML=t}catch(n){this.empty(e),this.append(e,t)}else this.empty(e),this.append(e,t);return e},prepare:function(e,t,r){n.Utils.Object.isArray(e)||(e=[e]),r&&r.reverse&&(e=e.reverse()),i(e,function(e){if(typeof e=="string"){var n=document.createElement("div");n.innerHTML=e,e=n.lastChild}t(e)})},append:function(e,t){return this.prepare(t,function(t){e.appendChild(t)}),e},prepend:function(e,t){return this.prepare(t,function(t){e.insertBefore(t,e.firstChild)},{reverse:!0}),e},before:function(e,t){return this.prepare(t,function(t){e.parentNode.insertBefore(t,e)}),e},after:function(e,t){return this.prepare(t,function(t){e.parentNode.insertBefore(t,e.nextSibling)},{reverse:!0}),e},remove:function(e){e.parentNode.removeChild(e)},css:function(e,t){return i(t,function(t,n){e.style[n]=t}),e},attrs:function(e,t){return arguments.length>1?this.setAttrs(e,t):this.getAttrs(e)},setAttrs:function(e,t){return i(t,function(t,n){e.setAttribute(n,t)}),e},getAttrs:function(e){var t={};return i(n.Utils.Array.make(e.attributes),function(e){t[e.name]=e.value}),t},getComputedStyle:function(e,t){if(!e)return;var n;typeof e.currentStyle!="undefined"&&typeof window.opera=="undefined"?n=e.currentStyle:n=document.defaultView.getComputedStyle(e,null);if(!t)return n;var r=n[t];return t=="height"&&r=="auto"&&(r=e.offsetHeight),r},closest:function(e,t){var n=null,r=e;while(n===null&&r.tagName.toLowerCase()!=="body")r&&this.matchesSelector(r,t)&&(n=r),r=r.parentNode;return n},search:function(e,t){var r=n.Utils.Array.make;if(/^#/.test(e))return document.getElementById(e.replace("#",""));var s=t?t:document;if(s.querySelectorAll)return r(s.querySelectorAll(e));if(/^\w+$/.test(e))return r(s.getElementsByTagName(e));var o=e.split("."),u=new RegExp(o[1]),a=o[0]==""?"*":o[0];return tags=s.getElementsByTagName(a),matches=[],i(tags,function(e){e.className&&u.exec(e.className)&&matches.push(e)}),matches},matchesSelector:function(e,t){var r=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(r)return r.call(e,t);var i=n.Utils.Element.search(t,e.parentNode);return n.Utils.Array.include(i,e)},getOuterHeight:function(e){var t=0,n=["borderTop","paddingTop","height","paddingBottom","borderBottom"];return i(n,function(n){var r=parseFloat(f.getComputedStyle(e,n));isNaN(r)&&(r=0),t+=r}),t},copy_css:function(e){var t=e.source,r=e.target,s=n.Utils.Element.getComputedStyle(t),o;try{o=s.hasOwnProperty("cssText")}catch(u){o=!1}if(o)r.style.cssText=s.cssText;else{var a=["fontFamily","fontSize","fontWeight","fontStyle","color","textTransform","textDecoration","letterSpacing","wordSpacing","lineHeight","textAlign","verticalAlign","direction","backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition","backgroundAttachment","opacity","width","height","top","right","bottom","left","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","position","display","visibility","zIndex","overflowX","overflowY","whiteSpace","clip","float","clear","cursor","listStyleImage","listStylePosition","listStyleType","markerOffset"];i(a,function(e){var t=s[e];t!==undefined&&(r.style[e]=t)})}},fade_in:function(e,t){t=t||{},this.css(e,{display:t.display||"block",opacity:0});var n=0,r=setInterval(function(){n+=.2,e.style.opacity=n.toFixed(1),parseInt(n)===1&&clearInterval(r)},100)},position:function(e){var t={},r=e.getBoundingClientRect(),i=parseFloat(n.Utils.Element.getComputedStyle(e,"marginTop"))||0,s=parseFloat(n.Utils.Element.getComputedStyle(e,"marginLeft"))||0;return t.top=r.top-i,t.bottom=r.bottom,t.vertical_center=(t.top+t.bottom)/2,t.left=r.left-s,t.right=r.right,t.horizontal_center=(t.left+t.right)/2,t}});var f=n.Utils.Element;n.extend("Utils.Document",{contentLoaded:function(e,t){var n=!1,r=!0,i=e.document,s=i.documentElement,o=i.addEventListener?"addEventListener":"attachEvent",u=i.addEventListener?"removeEventListener":"detachEvent",a=i.addEventListener?"":"on",f=function(r){if(r.type=="readystatechange"&&i.readyState!="complete")return;(r.type=="load"?e:i)[u](a+r.type,f,!1),!n&&(n=!0)&&t.call(e,r.type||r)},l=function(){try{s.doScroll("left")}catch(e){setTimeout(l,50);return}f("poll")};if(i.readyState=="complete")t.call(e,"lazy");else{if(i.createEventObject&&s.doScroll){try{r=!e.frameElement}catch(c){}r&&l()}i[o](a+"DOMContentLoaded",f,!1),i[o](a+"readystatechange",f,!1),e[o](a+"load",f,!1)}}}),n.extend("Utils.Window",{is_iframe:function(){return self!==top},dimensions:function(){return{width:this.width(),height:this.height()}},width:function(){return document.compatMode==="CSS1Compat"&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth},height:function(){return document.compatMode==="CSS1Compat"&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight},get_scroll_top:function(){return window.pageYOffset?window.pageYOffset:(document.documentElement||document.body).scrollTop}}),n.extend("Utils.URI",{parse:function(e){var t=document.createElement("a");return t.href=e,t},build:function(e,t){var r=n.Utils.Object.keys(t).sort();return i(r,function(r){var s=t[r],o=e.match(/\?/)?"&":"?";n.Utils.Object.isArray(s)?i(s,function(t){e+=o+r+"[]="+encodeURIComponent(t)}):e+=o+r+"="+encodeURIComponent(s)}),e}}),n.extend("Utils.Text",{defaultTruncateOptions:{length:100,omission:"...",maxLines:3},lastWordWithPrecedingWhitespaceRegexp:/\s*\S+$/,precedingAndTrailingWhitespaceRegexp:/^\s*|\s*$/g,truncate:function(e,t){t=t||{};var r=t.length||n.Utils.Text.defaultTruncateOptions.length,i=typeof t.omission=="string"?t.omission:n.Utils.Text.defaultTruncateOptions.omission,s=t.maxLines||n.Utils.Text.defaultTruncateOptions.maxLines,o=new RegExp("(?:.*?\\n){"+s+"}"),u=n.Utils.Text.strip(e);if(u.length<=r&&!u.match(o))return u;u.match(o)&&(u=n.Utils.Text.strip(u.match(o)[0]));while(u.length>r)u=u.replace(n.Utils.Text.lastWordWithPrecedingWhitespaceRegexp,"");return u+i},strip:function(e){return e.replace(n.Utils.Text.precedingAndTrailingWhitespaceRegexp,"").replace(/\r\n/g,"\n")},htmlEscapeLookup:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},htmlEscapeRegexp:/[&<>"']/g,escapeHtml:function(e){return e?(""+e).replace(this.htmlEscapeRegexp,function(e){return n.Utils.Text.htmlEscapeLookup[e]}):""},autoLink:function(e,t){t=t||{};var n=e.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1">$1</a>');return t.emailAddresses&&(n=n.replace(/(\w+@\w+\.\w+)/,'<a href="mailto:$1">$1</a>')),n},stripHTMLText:function(e){var t=document.createElement("div");return t.innerHTML=e,n.Utils.Text.strip(t.firstChild.textContent)||n.Utils.Text.strip(t.firstChild.innerText)||""}}),n.Utils.Log=function(e){typeof n.Utils.Log.enabled=="undefined"&&(n.Utils.Log.enabled=!1);if(!n.Utils.Log.enabled)return;try{var t=r.call(arguments);if(t.length>1){var i=t.slice(1,t.length);console.log(e,i)}else console.log(e)}catch(s){}},n.extend("Utils.Support",{_support:{},fixed_position:function(){return typeof this._support.fixed_position!="undefined"?this._support.fixed_position:(this._support.fixed_position=function(){var e=document.body;if(document.createElement&&e&&e.appendChild&&e.removeChild){var t=document.createElement("div");if(!t.getBoundingClientRect)return null;t.innerHTML="x",t.style.cssText="position:fixed;top:100px;",e.appendChild(t);var r=e.style.height,i=e.scrollTop;e.style.height="3000px",e.scrollTop=500;var s=t.getBoundingClientRect().top;e.style.height=r;var o,u=100;if(n.Utils.Browser.IE7){var a=5;o=s>=u-a&&s<=u+a}else o=s===u;return e.removeChild(t),e.scrollTop=i,o}return null}(),this._support.fixed_position)},post_message:function(){return typeof window.postMessage!="undefined"}}),n.extend("Utils.JSONP",{getJSON:function(e){var t=this.build_callback_name(),n=e.callback||function(){},r=e.callback_obj;window[t]=function(e){n.call(r,e);try{delete window[t]}catch(i){}};var i=e.url,s=/\?/.test(i)?"&":"?";i+=s+"callback="+t;var o=document.createElement("script");o.type="text/javascript",o.src=i,o.async=!0;var u=document.getElementsByTagName("head")[0]||document.documentElement;u.insertBefore(o,u.firstChild)},build_callback_name:function(){var e;do e="bit_jsonp"+(new Date).getTime();while(typeof window[e]!="undefined");return e}}),n.extend("Utils.JSONLDEventConverter",{convertEvents:function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(this.convertEvent(e[n]));return t},convertEvent:function(e){var t={"@context":"http://schema.org","@type":"MusicEvent",name:n.Utils.Text.stripHTMLText(e.title),image:e.artists[0].image_url,startDate:e.datetime,url:this.generateEventUrl(e),location:this.convertLocation(e.venue),offers:[{"@type":"Offer",url:this.generateTicketUrl(e),availability:this.convertStatus(e.ticket_status),category:"primary"}],performer:this.convertArtists(e.artists)};return t},convertStatus:function(e){var t={available:"InStock",unavailable:"SoldOut"};return t[e]},convertLocation:function(e){var t=e.country=="United States",r={"@type":"Place",name:n.Utils.Text.stripHTMLText(e.name),address:{"@type":"PostalAddress",addressCountry:e.country,addressLocality:e.city,addressRegion:t?e.region:""},geo:{"@type":"GeoCoordinates",latitude:e.latitude,longitude:e.longitude}};return r},convertArtist:function(e){return{"@type":"MusicGroup",name:e.name,sameAs:window.location.origin}},convertArtists:function(e){artistsLD=[];for(var t=0,n=e.length;t<n;t++){var r=this.convertArtist(e[t]);artistsLD.push(r)}return artistsLD},generateTicketUrl:function(e){var t=encodeURIComponent(e.artists[0].name);return[n.baseUrl,"event",e.id,"buy_tickets"].join("/")+"?"+["artist="+t,"came_from=209","affil_code=google"].join("&")},generateEventUrl:function(e){var t=encodeURIComponent(e.artists[0].name);return[n.baseUrl,"event",e.id].join("/")+"?"+["artist="+t,"came_from=209","affil_code=google"].join("&")}}),n.extend("Utils.XD",{send:function(e,t){n.Utils.XD.PostMessage.send(e,t)},listen:function(e,t){n.Utils.XD.PostMessage.listen(e,t)},PostMessage:{send:function(e,t){t=t||{};var r=n.Utils.XD.PostMessage.getTargetWindow(t.targetWindowName,window),i=t.targetOrigin||"*";e=n.Utils.XD.encodeMessage(e),n.Utils.Log("Sending postMessage... targetWindow / message / options",r,e,t),r.postMessage(e,i)},getTargetWindow:function(e,t){if(!e)return t.parent;var n=f.search("iframe"),r;for(var i=0,s=n.length;i<s;i++)if(n[i].name===e){r=t.frames[i];break}return r},listen:function(e,t){t=t||{},this.mainListener||this.setupMainListener(),this.listeners.push({callback:e,options:t})},listeners:[],setupMainListener:function(){var e=this.listeners;n.Utils.Event.observe("message",window,function(t){var r=!1;i(e,function(e){var i=e.callback,s=e.options||{},o=typeof s.origin=="undefined"||t.origin==s.origin;if(o&&n.Utils.XD.BIT_MESSAGE_REGEX.test(t.data)){r||(n.Utils.Log("Received BIT postMessage",t),r=!0);var u=n.Utils.XD.decodeMessage(t.data);i(u)}})}),this.mainListener=!0}},decodeMessage:function(e){e=e.replace(/^#/,"");var t={},n=e.split("&");return i(n,function(e){var n=e.split("=");t[n[0]]=decodeURIComponent(n[1])}),t},encodeMessage:function(e,t){if(typeof e=="object"){var r=[];i(e,function(e,t){var n=t+"="+encodeURIComponent(e);r.push(n)}),e=r.join("&")}return n.Utils.XD.BIT_MESSAGE_REGEX.test(e)||(e+="&BIT=true"),t&&i(t,function(t,n){e+="&"+n+"="+encodeURIComponent(t)}),e},BIT_MESSAGE_REGEX:/BIT=true/}),n.extend("Utils.Event",{observe:function(e,t,n,r){typeof t=="string"&&(t=f.search(t));if(typeof t.length=="undefined"||t===window)t=[t];typeof r=="undefined"&&(r=!1);var s=window.attachEvent?"attachEvent":"addEventListener";s==="attachEvent"&&(e="on"+e);var o=function(e){typeof e.target=="undefined"&&e.srcElement&&(e.target=e.srcElement),n.apply(this,arguments)};i(t,function(t){t[s](e,o,r)})},delegate:function(e,t,r,i){n.Utils.Event.observe(e,t,function(e){f.closest(e.target,r)&&i(e)})},prevent_default:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}}),n.extend("Utils.Browser",function(){var e={},t=navigator.userAgent,n=/MSIE ([0-9]{1,}[\.0-9]{0,})/i;if(n.test(t)){e.IE=!0;var r=parseFloat(t.match(n)[1]);e.IE6=r<7,e.IE7=!e.IE6&&r<8}else e.IE=e.IE6=e.IE7=!1;return e.Opera=!e.IE&&typeof window.opera!="undefined",e.Mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|Kindle|Silk/i.test(t),e.iOS=/iPhone|iPad|iPod/i.test(t),e.Android=/Android/i.test(t),e}()),n.extend("Utils.Object",{isArray:function(e){return Object.prototype.toString.call(e)=="[object Array]"},isEmpty:function(e){if(this.isArray(e))return e.length===0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},keys:function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}}),n.extend("Utils.Array",{include:function(e,t){if(e.indexOf)return e.indexOf(t)>-1;var n=!1;for(var r=0,i=e.length;r<i;r++){n=e[r]===t;if(n)return n}return n},make:function(e){var t;try{t=r.call(e)}catch(n){t=[];for(var i=0,s=e.length;i<s;i++)t.push(e[i])}return t}}),n.extend("Utils.Function",{bind:function(e,t){var n,i,s=Function.prototype.bind,o=function(){};return e.bind===s&&s?s.apply(e,r.call(arguments,1)):(i=r.call(arguments,2),n=function(){if(this instanceof n){o.prototype=e.prototype;var s=new o,u=e.apply(s,i.concat(r.call(arguments)));return Object(u)===u?u:s}return e.apply(t,i.concat(r.call(arguments)))})}}),n.extend("Utils.Class",{inherit:function(e,t,r){var i=function(){e.apply(this,arguments)};n.extend(i,e);var o=function(){};return o.prototype=e.prototype,i.prototype=new o,t&&s(i.prototype,t,!0),r&&s(i,r,!0),i.prototype.constructor=i,i},extend:function(e,t){var r=n.Utils.Class.inherit(this,e,t);return r.extend=this.extend,r}}),n.View=function(e){s(this,e||{}),this.ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},s(n.View,{delegateEventRegex:/^(\w+)\s*(.*)/,extend:n.Utils.Class.extend},!0),s(n.View.prototype,n.Utils.Element,!0),s(n.View.prototype,{tagName:"div",$:function(e,t){return this.search(e,t||this.el)},initialize:function(){},render:function(){return this},ensureElement:function(){if(this.el)return;var e=this;attrs={},getValue=function(t){return typeof e[t]=="function"?e[t]():e[t]},this.attributes&&(attrs=getValue("attributes")),this.id&&(attrs.id=getValue("id")),this.className&&(attrs["class"]=getValue("className")),this.el=this.make(this.tagName,attrs)},delegateEvents:function(){var e=this.events;i(this.events,function(e,t){var r=n.Utils.Function.bind(this[e],this),i=t.match(n.View.delegateEventRegex),s=i[1],o=i[2],u=o!==""?this.el:this.el.parentNode||document.body;n.Utils.Event.delegate(s,u,o||"*",r)},this)}},!0),n.extend("Janrain",{janrain_int:null,session:null,UUID_REGEX:/uuid=([a-z\d-]+)/i,bit_links_enabled:!0,capture_base_url:null,capture_client_id:null,get_user_session:function(e){jQuery.ajax({url:"http://api.echoenabled.com/v1/users/whoami?appkey="+this.echo_api_key+"&sessionID="+encodeURIComponent(Backplane.getChannelID()),dataType:"jsonp",success:function(t){e({type:"success",data:t})},error:function(t,n,r){e({type:"error",data:{xhr:t,textStatus:n,errorThrown:r}})}})},reload_window:function(){window.location.reload()},expect_login:function(){Backplane.expectMessagesWithin(60,"identity/login"),Backplane.subscribe(function(e){e.type=="identity/login"&&n.Janrain.reload_window()})},enable_capture:function(e){var t=this;this.janrain_int=setInterval(function(){if(jQuery&&jQuery.fn.enableCapture){try{jQuery(e).attr("target",""),jQuery(e).enableCapture("signinLink"),jQuery(e).click(t.expect_login)}catch(r){n.Utils.Log("BIT.Janrain.enable_capture failed:",r)}clearInterval(t.janrain_int)}},1e3)},get_uuid:function(e,t){typeof t=="undefined"&&(t=!1);var n,r,i=e.entry.accounts;if(t)n=i[0];else for(var s=0;s<i.length;s++)if(i[s].loggedIn.toString()=="true"){n=i[s];break}if(!n)return;return this.UUID_REGEX.test(n.identityUrl)?this.UUID_REGEX.exec(n.identityUrl)[1]:null},widget_rendered_callback:function(e){e.event_data_links&&e.add_event_data_links(),jQuery(document).ready(function(){var t=[],r=f.search("a.bit-rsvp",e.root_element());jQuery.each(r,function(e,n){t.push(n)});var i=f.search("a.bit-event-data",e.root_element());jQuery.each(i,function(e,n){t.push(n)}),typeof Backplane=="undefined"||typeof FB=="undefined"?setTimeout(function(){n.Janrain.widget_rendered_callback(t)},500):n.Janrain.session!=null?n.Janrain.enable_capture(t):(n.Utils.Log("checking Janrain login status"),n.Janrain.get_user_session(function(e){e.type==="success"&&e.data.poco?n.Utils.Log("Logged into Janrain"):(n.Utils.Log("Not logged into Janrain or error loading user data"),n.Janrain.session=!1,n.Janrain.enable_capture(t))}))})}}),n.extend("Views",{WidgetDialog:n.View.extend({id:"bit-widget-dialog",iframe_height:"275px",iframe_width:"500px",show:function(){this.css(this.container,{display:"block"}),this.show_content()},hide:function(){this.hide_iframes(),this.show_loader(),this.css(this.container,{display:"none"})},insert_content:function(){if(this.contentAdded)return;document.body.appendChild(this.el),this.html(this.el,n.Views.WidgetDialog.dialogHTML),this.contentAdded=!0},hide_iframes:function(){var e=this.$("iframe"),t=this;i(e,function(e){e.onload=e.onreadystatechange=function(){t.loaded_iframes[e.getAttribute("id")]=!0},e.style.display="none"})},show_loader:function(){this.dialog_loading.style.display=""},hide_loader:function(){this.dialog_loading.style.display="none"},show_iframe_and_event:function(e){var t=e.iframe,r=this,i=function(){r.loaded_iframes[t.getAttribute("id")]=!0,r.show_iframe(t.id),n.Utils.XD.send({event_id:e.event_id,action:e.action,open_fb_event_after_rsvp:e.widget.open_fb_event_after_rsvp},{targetWindowName:t.name})};this.show(),this.loaded_iframes[t.getAttribute("id")]?i():t.onload=t.onreadystatechange=i},find_iframe_for_widget:function(e){var t=this.$("iframe");for(var n=0,r=t.length;n<r;n++)if(t[n].getAttribute("id").match(e))return t[n]},trigger_email_signup:function(e){var t=e.iframe,r=this,i=function(){r.loaded_iframes[t.getAttribute("id")]=!0,n.Utils.XD.send({event_id:e.event_id,action:"show_email_signup"},{targetWindowName:t.name})};this.loaded_iframes[t.getAttribute("id")]?i():t.onload=t.onreadystatechange=i},show_content:function(){this.content.style.display="block",this.center()},min_dimensions_available:function(){var e=n.Utils.Window.dimensions();return e.width>=505&&e.height>=400},center:function(){if(this.container.style.display=="none")return;var e=n.Utils.Window.is_iframe()?"center_for_iframe":"center_for_window";this[e]()},center_for_window:function(){var e=n.Utils.Element.getOuterHeight(this.y_offset),t=typeof window.innerHeight=="undefined"?document.documentElement.clientHeight:window.innerHeight,r=t/2-e/2;n.Utils.Support.fixed_position()||(r+=n.Utils.Window.get_scroll_top()),this.y_offset.style.top=parseInt(r)+"px"},center_for_iframe:function(){this.container.style.position="absolute";var e=this.getOuterHeight(this.y_offset),t=n.Utils.Window.get_scroll_top(),r=this.position(this.closest(this.clicked_link,"div")),i=this.position(this.clicked_link),s=parseInt(t+i.vertical_center-e/2),o=parseInt(r.bottom+t-e);s=Math.min(s,o),s=Math.max(3,s),this.y_offset.style.top=s+"px"},show_iframe:function(e){this.hide_loader(),this.hide_iframes(),this.css(this.$("#"+e),{display:"block"}),this.show()},events:{"click #bit-widget-dialog-close":"hide"},handleXDMessage:function(e){if(e.action==="update_iframe_height"){var t=Math.min(n.Utils.Window.dimensions().height-100,parseInt(e.height));document.getElementById(e.iframe_id).style.height=t+"px",this.center()}else e.action==="close_dialog"?this.hide():e.action==="show_iframe"?this.show_iframe(e.iframe_id):e.action==="show_track_artist_header"&&this.show_track_artist_header(e)},show_track_artist_header:function(e){var t=n.findWidget(e.iframe_id);t&&t.show_track_artist_header()},render:function(){this.rendered=!0,this.insert_content(),this.loaded_iframes={},this.clicked_link=null,this.container=this.$("#bit-widget-dialog-container"),this.border=this.$("#bit-widget-dialog-border"),this.y_offset=this.$("#bit-widget-dialog-y-offset"),this.content=this.$("#bit-widget-dialog-content"),this.dialog_loading=this.$("#bit-widget-dialog-loading"),this.close_button=this.$("#bit-widget-dialog-close");if(!n.Utils.Window.is_iframe()){var e=document.onresize?document:window;n.Utils.Event.observe("resize",e,n.Utils.Function.bind(this.center,this))}return n.Utils.XD.listen(n.Utils.Function.bind(this.handleXDMessage,this)),this.border.style.display="block",this}},{dialogHTML:['<div class="generic_dialog pop_dialog" style="display:none" id="bit-widget-dialog-container">','<div class="generic_dialog_popup wide-popup">','<div class="pop_container_advanced popup-border-outer" id="bit-widget-dialog-y-offset">','<div class="pop_container_advanced popup-border-inner" id="bit-widget-dialog-border"></div>','<div class="pop_content popup-content" id="bit-widget-dialog-content">','<div id="bit-widget-dialog-loading">','<h2 class="dialog_title"><span>Loading...</span></h2>','<div class="dialog_content">','<div class="dialog_body">','<div class="loading"></div>',"</div>",'<div class="dialog_buttons clearfix">','<label class="uiButton uiButtonLarge uiButtonDefault">','<input type="button" value="Close" id="bit-widget-dialog-close" />',"</label>","</div>","</div>","</div>","</div>","</div>","</div>","</div>"].join(""),dialogCSS:["#bit-widget-dialog-container { position: fixed; width: 100%; height: 100%; margin: auto; }","#bit-widget-dialog { color: #333333; direction: ltr; font-family: 'lucida grande',tahoma,verdana,arial,sans-serif; font-size: 11px; text-align: left; }","#bit-widget-dialog label { color: #666666; cursor: pointer; font-weight: bold; vertical-align: middle; }","body#bit-widget-dialog { margin: 0px; padding: 0px; }","#bit-widget-dialog-loading .loading { height: 32px; width: 100%; background: transparent url('",n.assetHost,"/images/facebook/ajax-loader-large.gif') no-repeat scroll center center; }","#bit-widget-dialog .pop_content{direction:ltr}","#bit-widget-dialog {height:0;left:0;overflow:visible;outline:none;position:absolute;top:0;width:100%;z-index:250}","#bit-widget-dialog .generic_dialog_popup{height:0;overflow:visible;position:relative;width:520px;margin:auto}","#bit-widget-dialog .pop_content h2.dialog_title{background:#6d84b4;border:1px solid #3b5998;border-bottom:none;color:#fff;font-size: 14px;font-weight:bold;margin:0;}","#bit-widget-dialog .pop_content h2 span{display:block;padding:5px 10px}","#bit-widget-dialog .pop_content .dialog_content{background:#fff;border:1px solid #555;border-top-width:0}","#bit-widget-dialog .pop_content .dialog_body{padding:10px;border-bottom:1px solid #ccc}","#bit-widget-dialog .pop_content .dialog_buttons{background:#f2f2f2;padding:8px 10px 8px 10px;position:relative;text-align:right}","#bit-widget-dialog .pop_container_advanced{border-radius:8px;-webkit-border-radius:8px;-moz-border-radius:8px;padding:10px}","#bit-widget-dialog .uiButton,#bit-widget-dialog .uiButtonSuppressed:active,#bit-widget-dialog .uiButtonSuppressed:focus,#bit-widget-dialog .uiButtonSuppressed:hover{background:#eee url('",n.assetHost,"/images/facebook/silver-blue-bg.png') repeat 0 0;border:1px solid #999;border-bottom-color:#888;box-shadow:0 1px 0 rgba(0, 0, 0, .1);-moz-box-shadow:0 1px 0 rgba(0, 0, 0, .1);cursor:pointer;display:-moz-inline-box;display:inline-block;font-size:11px;font-weight:bold;line-height:normal !important;padding:2px 6px;text-align:center;text-decoration:none;vertical-align:top;white-space:nowrap}","#bit-widget-dialog .uiButtonConfirm{background-color:#5b74a8;background-position:0 -48px;border-color:#29447e #29447e #1a356e}","#bit-widget-dialog .uiButton:active,#bit-widget-dialog .uiButtonDepressed{background:#ddd;border-bottom-color:#999;box-shadow:0 1px 0 rgba(0, 0, 0, .05);-moz-box-shadow:0 1px 0 rgba(0, 0, 0, .05)}","#bit-widget-dialog .uiButton .uiButtonText,#bit-widget-dialog .uiButton input{background:none;border:0;color:#333;cursor:pointer;display:-moz-inline-box;display:inline-block;font-family:'Lucida Grande', Tahoma, Verdana, Arial, sans-serif;font-size:11px;font-weight:bold;margin:0;outline:none;padding:1px 0 2px;white-space:nowrap}","#bit-widget-dialog .uiButtonLarge,#bit-widget-dialog .uiButtonLarge .uiButtonText,#bit-widget-dialog .uiButtonLarge input{font-size:13px}","#bit-widget-dialog .uiButtonSpecial .uiButtonText,#bit-widget-dialog .uiButtonSpecial input,#bit-widget-dialog .uiButtonSpecial.uiButtonDisabled .uiButtonText,#bit-widget-dialog .uiButtonSpecial.uiButtonDisabled input,#bit-widget-dialog .uiButtonConfirm .uiButtonText, #bit-widget-dialog .uiButtonConfirm input, #bit-widget-dialog .uiButtonConfirm.uiButtonDisabled .uiButtonText, #bit-widget-dialog .uiButtonConfirm.uiButtonDisabled input { color: #FFFFFF; }","#bit-widget-dialog .uiButtonConfirm:active{background:#4f6aa3;border-bottom-color:#29447e}","#bit-widget-dialog .popup-border-outer { z-index: 1; background: none; position: relative; }","#bit-widget-dialog .popup-border-inner { background-color: #525252; -moz-opacity: 0.7; opacity: 0.7; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; padding: 0; filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=70); }","#bit-widget-dialog .popup-content { position: relative; z-index: 2; }","#bit-widget-dialog h2 { padding: 0px; }","#bit-widget-dialog .clear { clear: both; }","* html #bit-widget-dialog .popup-border-inner  { display: none; }","* html #rsvp-dialog-container { position: absolute; }"].join("")})}),n.extend("Utils.Widget",{renderAll:function(){var e=function(e){(new n.Widget(n.Utils.Widget.extractOptions(e))).insert_events(),f.remove(e)};i(f.search("a.bit-widget-initializer"),e),i(f.search("a.bit-widget-placeholder"),e)},optionToDataAttribute:function(e){return"data-"+e.replace(/_/g,"-")},extractOptions:function(e){var t=["artist","text_color","link_color","bg_color","separator_color","width","display_limit","notify_me","share_links","share_url","facebook_comments","myspace_layout","div_id","facebook_page_id","event_data_links","track_artist_header","email_signup","open_fb_event_after_rsvp","prefix","affil_code","app_id","force_narrow_layout","ios_banner_enabled"],r=f.attrs(e),s={},o=["true","false"],u=/^\d+$/;return i(t,function(e){var t=this.optionToDataAttribute(e);if(r.hasOwnProperty(t)){var i=r[t];e!=="artist"&&n.Utils.Array.include(o,i)?i=i==="true":u.test(i)&&(i=parseInt(i)),s[e]=i}},this),s.div_id||(s.div_id="bit-widget-"+n.widgets.length,this.createInlineWidgetDiv(e,s.div_id)),s},createInlineWidgetDiv:function(e,t){f.after(e,f.make("div",{id:t}))}}),n.Widget=function(e){this.artist=e.artist,this.text_color=e.text_color,this.link_color=e.link_color,this.bg_color=e.bg_color,this.separator_color=e.separator_color||"#E9E9E9",this.width=e.width||"100%",this.display_limit=e.display_limit||Number.MAX_VALUE,this.notify_me=e.notify_me!=0,this.share_links=e.share_links!=0,this.share_url=e.share_url||window.location.href,this.facebook_comments=e.facebook_comments!=0,this.myspace_layout=e.myspace_layout||!1,this.div_id=e.div_id,this.facebook_page_id=String(e.facebook_page_id||""),this.event_data_links=e.event_data_links!=0,this.track_artist_header=e.track_artist_header!=0,this.email_signup=e.email_signup!=0,this.open_fb_event_after_rsvp=e.open_fb_event_after_rsvp||!1,this.prefix=e.prefix||"js",this.affil_code=this.prefix+"_"+(e.affil_code||window.location.host),this.app_id=this.prefix+"_"+(e.app_id||window.location.host),this.timestamp=(new Date).getTime(),this.force_narrow_layout=e.force_narrow_layout||!1,this.local_events_loaded=!1,this.artist_events_loaded=!1,this.pending_writes=[],this.write_pending=!1,this.layout=this.use_narrow_layout()?"narrow":"standard",this.source=e.source,this.janrain=typeof this.source=="string"&&this.source.toLowerCase()==="iga"&&!!e.janrain&&!n.Utils.Browser.Mobile,this.janrain?(n.Janrain.echo_api_key=e.janrain.echo_api_key,n.Janrain.capture_client_id=e.janrain.capture_client_id,n.Janrain.capture_base_url=e.janrain.capture_base_url):(n.WidgetDialog=n.WidgetDialog||new n.Views.WidgetDialog,this.dialog=n.WidgetDialog),this.comments={},n.widgets.push(this)},s(n.Widget.prototype,{insert_events:function(){return this.artist?(this.write(this.loading_image()),n.Utils.JSONP.getJSON({url:this.localEventsUrl(),callback:this.local_events_callback,callback_obj:this}),n.Utils.JSONP.getJSON({url:this.artistEventsUrl(),callback:this.artist_events_callback,callback_obj:this})):this.write(this.no_artist_given()),this},write:function(e,t){var n=this;typeof t=="undefined"&&(t=!1),this.div_id||(this.div_id=this.unique_id("widget-container"),document.write('<div id="'+this.div_id+'"></div>')),document.getElementById(this.div_id)&&!this.write_pending?document.getElementById(this.div_id).innerHTML=e:(t||this.pending_writes.push(e),this.write_pending||(this.write_pending=!0,setTimeout(function(){n.retry_write()},13)))},retry_write:function(){var e=this;document.getElementById(this.div_id)?(this.write_pending=!1,this.write(this.pending_writes[this.pending_writes.length-1],!0)):setTimeout(function(){e.retry_write()},13)},unique_id:function(e){return[e,this.timestamp].join("-")},render:function(){this.write(this.to_html(this.artist_events,this.local_events)),this.invert_description_link_colors(),this.invert_element_colors(),this.on("click","tr[data-bit-event-id] td",this.click_event_row_rsvp_button),this.on("click","a.toggle-description",this.toggle_event_description),this.on("click","a.toggle-comments",this.toggle_event_comments),this.on("click","a.bit-events-nav",this.toggle_events_table),this.on("click","a.bit-show-all-dates",this.show_all_events),this.on("click","a.bit-view-more",this.view_full_description),this.on("click","a.bit-view-less",this.view_truncated_description),this.janrain?n.Janrain.widget_rendered_callback(this):this.rendered_callback()},click_event_row_rsvp_button:function(e){var t=f.closest(e.target,"a");if(t)return;var n=f.closest(e.target,"tr[data-bit-event-id]");if(!n
)return;var r=f.search("a.bit-rsvp",n)[0];if(!r)return;try{r.click()}catch(i){console&&console.error&&console.error(i)}},on:function(e,t,r){n.Utils.Event.observe(e,f.search(t,this.root_element()),n.Utils.Function.bind(r,this))},loading_image:function(){return['<div style="text-align:center;">','<img src="'+n.assetHost+"/images/widget-ajax-loader.gif\" style='width:43px;height:11px;' />","</div>"].join("")},root_element:function(){if(this._root_element)return this._root_element;var e=f.search("div");for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.getAttribute("data-bit-widget-id")==this.timestamp){this._root_element=r;break}}return this._root_element},invert_description_link_colors:function(){var e=f.search("a.bit-event-description-link",this.root_element());i(e,function(e){if(f.closest(e,"div")==this.root_element()){var t=f.getComputedStyle(e,"color");f.css(e,{backgroundColor:t,backgroundImage:'url("'+n.assetHost+"/images/widget/plus_"+n.Utils.Color.whiteOrBlack(t)+'.gif")',backgroundPosition:"center center",backgroundRepeat:"no-repeat"})}},this)},invert_element_colors:function(){var e=f.search(".bit-invert",this.root_element());i(e,function(e){var t=f.getComputedStyle(e,"color");f.css(e,{color:n.Utils.Color.whiteOrBlack(t),backgroundColor:t})})},events_table_navigation:function(e){var t=[],n={upcoming:"Upcoming",local:"Local Dates"};return i(n,function(n,r){t.push(r===e?n:"<a href='javascript:;' class='bit-events-nav' data-events-type='"+r+"'>"+n+"</a>")}),"<span class='bit-header-links'>"+t.join(" | ")+"</span>"},events_table:function(e){var t=e.events,n=e.type,r=e.layout,s=n=="local"?"display:none;":"",o=r=="standard"?"bit-events":"bit-events-narrow",u,a=[];r==="narrow"?u=["<tr class='bit-header-narrow'>","<th colspan='5'>","<div class='bit-header-overflow-fix'>",this.events_table_navigation(n),this.artist_share_links(),"</div>","</th>","</tr>"].join(""):u=["<tr class='bit-header'>","<th class='bit-description-links'>&nbsp;</th>","<th colspan='7'>","<div class='bit-header-overflow-fix'>",this.events_table_navigation(n),this.artist_share_links(),"</div>","</th>","</tr>","<tr>","<th class='bit-description-links'>&nbsp;</th>","<th class='bit-date'>Date</th>","<th class='bit-venue'>Venue</th>","<th class='bit-location'>Location</th>","<th class='bit-artist-event-link'>&nbsp;</th>","<th class='bit-tickets' colspan='3'>Tickets</th>","</tr>"].join(""),t.length>0?i(t,function(t,n){var r={hidden:n>=this.display_limit,layout:e.layout};a.push(e.layout==="narrow"?this.narrowEventRow(t,r):this.standardEventRow(t,r)),a.push(this.eventCommentsRow(t,r))},this):a.push(this.api_error_response()||this.no_dates_message(n));var f=this.display_limit<t.length?"<tr class='bit-bottom'><td colspan='7'><a href='javascript:;' class='bit-show-all-dates'>Show All Dates</a></td></tr>":"";return["<table cellpadding='0' cellspacing='0' class='"+o+"' style='"+s+"' data-events-type='"+n+"'>","<tbody>",u,a.join(""),f,"</tbody>","</table>"].join("")},to_html:function(e,t){var n='<div style="display:none">&nbsp;</div>';return[n,this.css(),"<div id='bit-events' data-bit-widget-id='"+this.timestamp+"' data-bit-artist='"+this.artist_param()+" class='bit-widget-container'>",this.track_artist_header?this.track_artist_header_content():"",this.events_table({events:e,type:"upcoming",layout:this.layout}),this.events_table({events:t,type:"local",layout:this.layout}),"</div>"].join("")},track_artist_header_content:function(){var e=this.api_artist||this.artist,t=this.track_artist_url(n.cameFromCodes.trackArtistHeader);return["<a href='",t,"' target='_blank' class='bit-track-artist-header' style='display:none;'>","<div class='bit-invert'>Track ",e,"</div>","<div class='bit-notify'><strong>Notify Me</strong> when ",e," comes to town.</div>","</a>"].join("")},show_track_artist_header:function(){var e=f.search("a.bit-track-artist-header",this.root_element())[0];e&&f.fade_in(e,{display:"block"})},details_link_or_nbsp:function(e){if(!this.use_narrow_layout()||this.myspace_layout){if(!this.show_facebook_comments()&&!e.description)return"&nbsp;";var t=this.show_facebook_comments()?"toggle-comments":"toggle-description";return'<a href="javascript:;" class="bit-event-description-link '+t+'">&nbsp;</a>'}return e.description?'<a href="javascript:;" class="bit-event-description-link toggle-description">&nbsp;</a>':"&nbsp;"},standardEventRow:function(e,t){return["<tr class='"+(t.hidden?"bit-hidden":"")+"' data-bit-event-id='"+e.id+"'>","<td class='bit-description-links'>",this.details_link_or_nbsp(e,t),"</td>","<td class='bit-date'><span class=\"bit-event-data\">",this.formatted_date(e),"</span></td>","<td class='bit-venue'><span class=\"bit-event-data\">",n.Utils.Text.escapeHtml(e.venue.name),"</span>",this.lineup(e),"</td>","<td class='bit-location'><span class=\"bit-event-data\">",this.formatted_location(e),"</span></td>","<td class='bit-artist-event-link'>",this.artistEventLinkContent(e),"</td>","<td class='bit-tickets'>",this.ticket_link(e),"</td>",this.rsvp_td(e),"</tr>"].join("")},eventCommentsRow:function(e,t){var n=t.layout==="standard",r=t.layout==="narrow",i=r&&this.myspace_layout,s=this.show_facebook_comments()&&(n||i),o=s?"bit-event-details":"bit-event-description bit-dashed-border",u;return!s&&!e.description?"":(s?u=["<td class='bit-details' colspan='"+(r?5:7)+"'>",e.description?this.eventDescriptionContent(e):"","<div class='bit-details-comments'></div>","</td>"].join(""):u=["<td class='bit-description-links'>&nbsp;</td>","<td class='bit-date'>&nbsp;</td>","<td colspan='3' class='bit-description'>"+this.process_description(e.description)+"</td>"].join(""),["<tr class='"+o+"' data-bit-event-id='"+e.id+"' style='display:none;'>",u,"</tr>"].join(""))},eventDescriptionContent:function(e,t){return["<div class='bit-details-title'>Event Details:</div>","<div class='bit-details-text'>","<div class='bit-details-description'>",this.truncate_and_process_description(e.description),"</div>","</div>"].join("")},narrowEventRow:function(e,t){return["<tr class='"+(t.hidden?"bit-hidden":"")+"' data-bit-event-id='"+e.id+"'>","<td class='bit-description-links'>",this.details_link_or_nbsp(e),"</td>","<td class='bit-date'><span class=\"bit-event-data\">",this.formatted_date(e),"</span></td>","<td class='bit-concert'>",this.narrow_layout_middle_column_html(e),"</td>",this.rsvp_td(e),"</tr>"].join("")},customTicketUrl:function(e){return n.Utils.URI.build(n.baseUrl+"/event/"+e.id+"/buy_tickets",{artist:this.artist,seller_type:"custom",came_from:n.cameFromCodes.customTickets})},artistEventLinkContent:function(e){var t=e.artist_event_link_label;return t&&t!=="Sold Out"?"<a href='"+this.customTicketUrl(e)+"' target='_blank' class='bit-artist-event-link'>"+t+"</a>":"&nbsp;"},narrow_layout_middle_column_html:function(e){var t=['<div class="venue"><span class="bit-event-data">',n.Utils.Text.escapeHtml(e.venue.name),"</span></div>",this.lineup(e),'<div class="location"><span class="bit-event-data">',this.formatted_location(e),"</span></div>"];return e.ticket_status==="available"&&t.push(this.ticket_link(e)),e.artist_event_link_label&&e.artist_event_link_label!=="Sold Out"&&t.push(this.artistEventLinkContent(e)),t.join("")},rsvp_link:function(e){return"<a target='_blank' class='bit-rsvp' href='"+this.rsvp_url(e)+"'>RSVP</a>"},rsvp_url:function(e){var t=n.Utils.Browser.Mobile?e.facebook_rsvp_url.replace("/facebook_rsvp",""):e.facebook_rsvp_url;return t.replace(/came_from=\d+/,"came_from="+n.cameFromCodes.rsvp)},formatted_location:function(e){var t=e.venue,n=t.country.toLowerCase()==="united states"?t.region:t.country;return t.city+", "+n},lineup:function(e){if(e.artists.length===1)return"";var t=[];return i(e.artists.splice(1,e.artists.length),function(e){t.push(e.name)}),['<div class="lineup">','<span class="bit-event-data">',n.Utils.Text.truncate("w/ "+t.join(", "),{length:25}),"</span>","</div>"].join("")},artist_param:function(){var e=this.api_artist||this.artist;return e=e.replace(/\?/g,encodeURIComponent("?")),e=e.replace(/\//g,encodeURIComponent("/")),e=encodeURIComponent(e),e=e.replace(/'/g,escape("'")),e=e.replace(/"/g,escape('"')),e},facebookPageIdParam:function(){var e=/^\d+$/;return e.test(this.facebook_page_id)?"fbid_"+this.facebook_page_id:null},ticket_link:function(e){if(e.ticket_status=="available"){var t={affil_code:this.affil_code,came_from:n.cameFromCodes.buyTickets};return e.ticket_url.match(/artist=/)||(t.artist=this.artist_param()),'<a target="_blank" class="bit-buy-tix" href="'+n.Utils.URI.build(e.ticket_url,t)+'">'+e.ticket_type+"</a>"}return"&nbsp;"},rsvp_td:function(e){return this.janrain&&!n.Janrain.bit_links_enabled?"":'<td class="bit-rsvp"><label class="bit-uiButton bit-uiButtonDefault">'+this.rsvp_link(e)+"</label></td>"},css:function(){var e="#bit-events[data-bit-widget-id='"+this.timestamp+"'] ",t="";n.Widget.staticCSSAdded||(t+=n.Widget.staticCSS,n.Widget.staticCSSAdded=!0),n.Views.WidgetDialog.css_added||(t+=n.Views.WidgetDialog.dialogCSS,n.Views.WidgetDialog.css_added=!0);var r=[e+"{ width:"+this.width+";}",e+(this.bg_color?"{ background-color: "+this.bg_color+";}":"{}"),e+".bit-events, .bit-events-narrow { width:"+this.width+";}",e+".bit-events td { border-top: 1px solid "+this.separator_color+";}",e+".bit-events-narrow td { border-top: 1px solid "+this.separator_color+";}",e+"td"+(this.text_color?"{ color: "+this.text_color+";}":"{}"),e+"th"+(this.text_color?"{ color: "+this.text_color+";}":"{}"),e+"td"+(this.bg_color?"{ background-color: "+this.bg_color+";}":"{}"),e+"th"+(this.bg_color?"{ background-color: "+this.bg_color+";}":"{}"),e+"a"+(this.link_color?"{ color: "+this.link_color+";}":"{}"),e+".bit-events tr.bit-dashed-border td { border-top: 1px dashed "+this.separator_color+";}",e+".bit-events-narrow tr.bit-dashed-border td.bit-description { border-top: 1px dashed "+this.separator_color+";}",e+".bit-events-narrow tr.no-dates td span"+(this.myspace_layout?"{ display: block; }":"{}"),e+"table { border-bottom: 1px solid "+this.separator_color+";}",e+"a.bit-track-artist-header {border-top: 1px solid "+this.separator_color+"; border-bottom: 1px solid "+this.separator_color+"; }"].join("");return'<style type="text/css">'+t+r+"</style>"},no_artist_given:function(){return[this.css(),"<div class='bit-no-upcoming-events'>No artist given.</div>"].join("")},process_description:function(e){var t=n.Utils.Text.escapeHtml(e||"");return t!=""&&(t=n.Utils.Text.autoLink(t),t=t.replace(/\n/g,"<br/>")),t},truncate_and_process_description:function(e){var t=100,r=n.Utils.Text.strip(e||""),i=3,s=r.split("\n").length>i;if(r.length<t&&!s)return["<span>",this.process_description(r),"</span>"].join("");var o=n.Utils.Text.truncate(r,{length:t,omission:"",maxLines:i}),u='<a href="javascript:;" class="bit-toggle-description bit-view-more">view more</a>',a='<a href="javascript:;" class="bit-toggle-description bit-view-less">view less</a>';return["<span>",this.process_description(o),"...",u,"</span>",'<span style="display:none;">',this.process_description(r),"<br/>",a,"</span>"].join("")},no_dates_message:function(e){var t="No "+e+" dates.";return this.notify_me&&(t+=" <a href='"+this.track_artist_url(n.cameFromCodes.noTourDatesNotifyMe)+"'>Notify me when <span>"+(this.api_artist||this.artist)+"</span> comes to my area.</a>"),this.use_narrow_layout()?"<tr class='no-dates'><td colspan='4'>"+t+"</td></tr>":"<tr class='no-dates'><td class='bit-description-links'>&nbsp;</td><td colspan='6'>"+t+"</td></tr>"},api_error_response:function(){if(!this.api_error)return;return this.use_narrow_layout()?"<tr class='no-dates'><td colspan='4'>"+n.Utils.Text.autoLink(this.api_error)+"</td></tr>":"<tr class='no-dates'><td class='bit-description-links'>&nbsp;</td><td colspan='6'>"+n.Utils.Text.autoLink(this.api_error,{emailAddresses:!0})+"</td></tr>"},track_artist_url:function(e){return[n.baseUrl,"/track/",this.artist_param(),"?came_from=",e].join("")},artist_share_links:function(){return this.share_links?["<span class='bit-share-links'>","<a target='_blank' title='Share this on Facebook' class='bit-fb-share' href='"+this.fb_share_link()+"'></a>","<a target='_blank' title='Share this on Twitter' class='bit-twitter-share' href='"+this.twitter_share_link()+"'></a>","</span>","<span class='bit-share-text'>Share:</span>"].join(""):""},bit_share_link:function(e){return[n.baseUrl,"/",this.artist_param(),"/share?u=",encodeURIComponent(this.share_url),"&came_from=",e].join("")},fb_share_link:function(){var e=this.bit_share_link(n.cameFromCodes.fbShare),t="123966167614127",r=n.baseUrl+"/"+this.artist_param()+"/photo/medium.jpg",i=this.artist+" - Tour Dates",s=n.Utils.URI.parse(this.share_url).hostname,o="",u=n.baseUrl+"/redirect?u="+encodeURIComponent(this.share_url);/^http:\/\/myspace\.com\/\d+/.test(this.share_url)&&(i+=" on MySpace");if(this.artist_events.length==0)var a="";else if(this.artist_events.length==1)var a="1 upcoming tour date";else var a=this.artist_events.length+" upcoming tour dates";return["http://www.facebook.com/dialog/feed?","app_id=",t,"&link=",encodeURIComponent(e),"&picture=",r,"&name=",encodeURIComponent(i).replace(/'/g,escape("'")),"&caption=",encodeURIComponent(s),"&description=",encodeURIComponent(a),"&properties=",encodeURIComponent(o),"&redirect_uri=",encodeURIComponent(u)].join("")},twitter_share_link:function(){return["http://www.bandsintown.com/",this.artist_param(),"/twitter_share?u=",encodeURIComponent(this.share_url)].join("")},show_facebook_comments:function(){return this._show_facebook_comments!=null?this._show_facebook_comments:(this.facebook_comments&&this.artist_events&&i(this.artist_events,function(e){e.facebook_comments_xid&&(this._show_facebook_comments=!0)},this),this._show_facebook_comments=this._show_facebook_comments||!1,this._show_facebook_comments)},use_narrow_layout:function(){return this.force_narrow_layout==1?!0:this.width.match(/\d+px$/)?parseInt(this.width)<275:!1},find_artist_event:function(e){var t=null;for(var n=0;n<this.artist_events.length;n++)if(this.artist_events[n].id==e){t=this.artist_events[n];break}return t},artistEventsUrl:function(){var e={api_version:"2.0",app_id:this.app_id,extended:!0,widget_version:t};return this.facebookPageIdParam()&&(e.artist_id=this.facebookPageIdParam()),n.Utils.URI.build(n.apiBaseUrl+"/artists/"+this.artist_param()+"/events.json",e)},localEventsUrl:function(){var e={api_version:"2.0",app_id:this.app_id,extended:!0,location:"use_geoip",widget_version:t};return this.facebookPageIdParam()&&(e.artist_id=this.facebookPageIdParam()),n.Utils.URI.build(n.apiBaseUrl+"/artists/"+this.artist_param()+"/events/search.json",e)},artist_events_callback:function(e){this.artist_events_loaded=!0,this.artist_events=e&&!e.errors?e:[],this.api_error=null;try{e.errors[0].match(/install/i)&&(this.api_error=e.errors[0])}catch(t){}this.artist_events.length>0&&(this.api_artist=this.artist_events[0].artists[0].name,this.render_json_ld()),this.local_events_loaded&&this.render()},render_json_ld:function(){var e=document.createElement("script");e.type="application/ld+json";var t=n.Utils.JSONLDEventConverter.convertEvents(this.artist_events);e.text=JSON.stringify(t),document.body.appendChild(e)},local_events_callback:function(e){this.local_events_loaded=!0,this.local_events=e&&!e.errors?e:[],this.api_error=null;try{e.errors[0].match(/install/i)&&(this.api_error=e.errors[0])}catch(t){}this.local_events.length>0&&(this.api_artist=this.local_events[0].artists[0].name),this.artist_events_loaded&&this.render()},insert_widget_iframe:function(e){var t=this,n=this.unique_id("widget-iframe"),r=f.make("iframe",{id:n,name:n,src:this.widget_iframe_url(),width:this.dialog.iframe_width,height:this.dialog.iframe_height,frameBorder:"0",scrolling:"auto"});r.onload=r.onreadystatechange=function(){t.dialog.loaded_iframes[n]=!0},f.css(r,{display:"none"}),f.append(e,r),this.widget_iframe=r},widget_iframe_url:function(){return n.Utils.URI.build(n.baseUrl+"/"+this.artist_param()+"/widget_iframe",{iframe_id:this.unique_id("widget-iframe"),parent_window_location:window.location.href,track_artist_header:this.track_artist_header,affil_code:this.affil_code})},add_event_data_links:function(){if(this.janrain&&!n.Janrain.bit_links_enabled)return;var e=f.search("span.bit-event-data",this.root_element());i(e,function(e){var t=f.closest(e,"tr").getAttribute("data-bit-event-id"),n=f.make("a",{href:this.rsvp_url(this.find_artist_event(t)),"class":"bit-event-data",target:"_blank"},e.innerHTML);f.copy_css({target:n,source:e,except:["cursor"]}),f.css(n,{cursor:"pointer"}),f.before(e,n),f.remove(e)},this)},rendered_callback:function(){if(this.artist_events.length==0)return;this.event_data_links&&this.add_event_data_links();if(!n.Utils.Support.post_message())return;this.dialog.rendered||this.dialog.render(),this.insert_widget_iframe(this.dialog.content);if(n.Utils.Browser.Mobile||!n.widgetDialogEnabled)return;if(n.Utils.Window.is_iframe()&&!n.WidgetDialog.min_dimensions_available())return;this.on("click","a.bit-rsvp",this.rsvp_link_clicked_callback),this.on("click","a.bit-event-data",this.rsvp_link_clicked_callback),this.on("click","a.bit-buy-tix",this.buy_tickets_clicked_callback)},buy_tickets_clicked_callback:function(e){if(!this.email_signup)return;var t=f.closest(e.target,"a"),n=f.closest(t,"tr").getAttribute("data-bit-event-id"),r=this.dialog.find_iframe_for_widget(this.timestamp);this.dialog.clicked_link=t,this.dialog.trigger_email_signup({widget:this,iframe:r,event_id:n})},rsvp_link_clicked_callback:function(e){n.Utils.Event.prevent_default(e);var t=f.closest(e.target,"a"),r=f.closest(t,"tr").getAttribute("data-bit-event-id"),i=this.dialog.find_iframe_for_widget(this.timestamp);this.dialog.hide_iframes(),this.dialog.show_loader(),this.dialog.clicked_link=t,this.dialog.show_iframe_and_event({widget:this,iframe:i,event_id:r,action:"show_event"})},toggle_event_description:function(e){var t=f.closest(e.target,"a.bit-event-description-link"),n=f.closest(e.target,"tr").nextSibling;n.style.display=="none"?(f.css(n,{display:""}),f.css(t,{backgroundImage:t.style.backgroundImage.replace("plus","minus")})):(f.css(n,{display:"none"}),f.css(t,{backgroundImage:t.style.backgroundImage.replace("minus","plus")}))},toggle_event_comments:function(e){var t=this,n=f.closest(e.target,"tr"),r=f.closest(n,"table"),s=f.closest(r,".bit-widget-container"),o=f.search("tr.bit-event-details",r),u=n.getAttribute("data-bit-event-id"),a=!1;i(o,function(e){var n=f.search("a.bit-event-description-link",e.previousSibling)[0];if(e.style.display==="none"&&e.getAttribute("data-bit-event-id")===u){f.css(e,{display:""}),e.previousSibling.className=e.previousSibling.className+" bit-details-open";if(!t.comments[u]){t.comments[u]=!0;var r=f.search(".bit-details-comments",e)[0];t.add_comments_iframe(r,{event_id:u,artist:t.artist})}f.css(n,{backgroundImage:n.style.backgroundImage.replace("plus","minus")})}else f.css(e,{display:"none"}),e.previousSibling.className=e.previousSibling.className.replace(" details-open",""),f.css(n,{backgroundImage:n.style.backgroundImage.replace("minus","plus")})})},formatted_date:function(e){var t={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"},n=e.datetime.split("T")[0].split("-");return t[n[1]]+" "+n[2]},toggle_events_table:function(e){var t=e.target.getAttribute("data-events-type"),n=f.search("table",this.root_element());i(n,function(e){e.style.display=e.getAttribute("data-events-type")===t?"":"none"})},show_all_events:function(e){var t=f.search("tbody",this.root_element())[0];skipped_tr_classnames=/bit-(local|dashed-border|event-description|bottom|header|event-details)/,i(t.childNodes,function(e){e.className&&!e.className.match(skipped_tr_classnames)&&(e.className="")}),f.css(f.closest(e.target,"tr"),{display:"none"})},view_full_description:function(e){var t=e.target;t.parentNode.style.display="none",t.parentNode.nextSibling.style.display=""},view_truncated_description:function(t){var t=e.target;element.parentNode.style.display="none",element.parentNode.previousSibling.style.display=""},add_comments_iframe:function(e,t){var r=parseInt(f.getComputedStyle(e,"width"));isNaN(r)&&(r=e.clientWidth);var i=f.make("iframe",{src:n.Utils.URI.build(n.baseUrl+"/event/"+t.event_id+"/fb_comments_iframe",{artist:t.artist,width:r}),width:r,frameborder:0});f.html(e,i),i.style.height="350px"}},!0),s(n.Widget,{staticCSS:[".bit-widget-container { font-family:arial,helvetica,sans-serif; font-size:13px;}",".bit-events, .bit-events-narrow {overflow: hidden;display: table;}",".bit-events th, .bit-events td {width: auto;text-align: left; padding: 4px;vertical-align:middle;}",".bit-events td {height: 36px; background:none;}",".bit-events-narrow td {width:auto; height:57px; background:none;padding:4px;vertical-align:middle;}","#bit-events td.bit-tickets, #bit-events th.bit-tickets {width:55px; padding-right: 8px;}","#bit-events td.bit-artist-event-link { text-align: right; }","#bit-events td.bit-artist-event-link a { float: right; }","#bit-events td.bit-actions a, #bit-events td.bit-rsvp a { float: right; }","#bit-events td.bit-rsvp { width: 42px; padding-right: 8px; }","#bit-events td.bit-comment { width: 21px; padding-left: 8px; padding-right: 8px; }",'#bit-events td .bit-uiButton { display:inline-block; padding: 1px 6px; height: 16px; line-height: 16px !important; cursor: pointer; font-family: "lucida grande",tahoma,verdana,arial,sans-serif}','#bit-events td .bit-uiButton { background:#eee url("',n.assetHost,'/images/facebook/silver-blue-bg.png") repeat 0 0; border:1px solid #999; border-bottom-color:#888; box-shadow:0 1px 0 rgba(0, 0, 0, .1); -moz-box-shadow:0 1px 0 rgba(0, 0, 0, .1); font-size:11px; font-weight:bold; text-align:center; text-decoration:none; vertical-align:top; white-space:nowrap }',"#bit-events td .bit-uiButton:active{background:#ddd;border-bottom-color:#999;box-shadow:0 1px 0 rgba(0, 0, 0, .05);-moz-box-shadow:0 1px 0 rgba(0, 0, 0, .05)}",'#bit-events td .bit-uiButtonSpecial{background-image:url("',n.assetHost,'/images/facebook/silver-blue-bg.png"); background-repeat:no-repeat;background-position:0px -96px;background-color:#69a74e;border-color:#3b6e22 #3b6e22 #2c5115;}',"#bit-events td .bit-uiButtonSpecial:active{background:#609946;border-bottom-color:#3b6e22;}","#bit-events td .bit-uiButton a, .bit-uiButton a:hover { text-decoration: none; display: inline-block; }","#bit-events td .bit-uiButtonSpecial a { color: #FFFFFF; }","#bit-events td .bit-uiButtonDefault a { color: #333333; }","#bit-events td.bit-comment a.bit-comment { background: transparent url('",n.assetHost,"/images/facebook/comments_icon.gif') 0px 0px no-repeat; width: 15px; height: 16px; display: inline-block; margin-top: 2px; float: right; }","#bit-events td.bit-comment a:hover, #bit-events td.bit-comment a.bit-comment-open { background-position: 0px -16px; }","#bit-events td.bit-location {font-weight:bold;}","#bit-events td.bit-description, #bit-events th.bit-description {font-size: 85%; left: 8px 4px; }","#bit-events td.bit-description-links, #bit-events th.bit-description-links {padding-left: 8px; width: 6px;}","#bit-events .bit-hidden {display:none;}","#bit-events .bit-bottom td {padding-left:8px;height:36px;}","#bit-events .bit-bottom td.concerts-by-bandsintown {text-align:right;}","#bit-events .bit-bottom a { vertical-align: middle; border: none; display: inline-block; }","#bit-events table a { text-align: left; float: left; width:auto; }","#bit-events table a:hover { -webkit-transition: none; -moz-transition: none; -o-transition: none; transition: none; }","#bit-events td.bit-description a { float: none; }","#bit-events a.bit-event-description-link { text-decoration: none; margin: 0; padding: 0; display: inline-block; height: 9px; width: 9px; line-height: 9px; font-size: 9px; text-align: center; vertical-align: middle; border: none;}",".bit-events tr.bit-dashed-border td.bit-description-links, .bit-events tr.bit-dashed-border td.bit-date, .bit-events-narrow tr.bit-dashed-border td { border-top: 1px solid transparent;}","#bit-events td.bit-concert a { float: none; }","td.bit-date { width: 45px; }","tr.bit-header th, tr.bit-header-narrow { line-height: 26px; }","#bit-events tr.bit-header a, #bit-events tr.bit-header-narrow a { float: none; font-weight: normal; }","#bit-events tr.bit-header-narrow th { text-align: left; padding: 4px;}","#bit-events .bit-events-narrow tr.no-dates td a { display: block; }","#bit-events .bit-events td.no-dates td { padding: 20px 0px; }","#bit-events .bit-header-links { margin-right: 15px; }","#bit-events .bit-share-text { float:right; }","#bit-events .bit-share-links { float: right; }","#bit-events .bit-share-links a { display: inline-block; width: 26px; height: 26px; vertical-align: middle; }","#bit-events .bit-fb-share { background: transparent url('",n.assetHost,"/images/facebook/icons/fb_share.gif') top left no-repeat; margin-left: 4px; display: inline-block; width: 26px; height:26px; vertical-align: middle;}","#bit-events .bit-twitter-share { background: transparent url('",n.assetHost,"/images/facebook/icons/twitter_share.gif') top left no-repeat; display: inline-block; width: 26px; height:26px; vertical-align: middle;}","#bit-events .bit-events-narrow tr.no-dates td { padding-bottom: 25px; padding-top: 20px; }","#bit-events tr.no-dates td { padding-top: 10px; padding-bottom: 10px; }","#bit-events tr.no-dates td a { float: none; margin-top: 15px; }","#bit-events td.bit-concert a.bit-buy-tix { padding-right: 8px; }",".bit-header-overflow-fix { height: 26px; overflow: hidden; }","#bit-events iframe { border: none; }","#bit-events .comments-title, #bit-events .description-title { color: #323232; font-size: 11px; font-weight: bold; margin: 0px 0px 4px 0px;}","#bit-events .bit-event-details { color: #000000; }","#bit-events .bit-details-title { background-color: #ffffff; font-weight: bold; padding: 4px 8px 0px 20px; color: #0e0e0e; font-size: 11px; }","#bit-events .bit-details-title a { float: right; color: #8296cc; text-decoration: none; }","#bit-events .bit-details-title a:hover { color: #ffffff; text-decoration: none; }","#bit-events .bit-details-text { background-color: #ffffff; margin-bottom: 1px; padding: 5px 8px 5px 20px; color: #1A1A1A; }","#bit-events .bit-details-comments { background: transparent; padding: 0px; margin: 0px; }","#bit-events .bit-details-text a { color: #3857a0; float: none; }","#bit-events a.bit-fb-event-link { font-weight: bold; display: block; text-decoration: none; margin: 4px 0px; }","#bit-events tr td.bit-details { padding: 0px; }","#bit-events .venue, #bit-events .location, #bit-events .lineup { display: block; clear: left; font-size: smaller; line-height: 100%; }","#bit-events .location { font-weight: bold }","#bit-events a.bit-track-artist-header {text-align: center; padding: 10px 0px; font-size: 13px; line-height: 1.5; display: block; text-decoration: none; }","#bit-events a.bit-track-artist-header:hover {text-decoration: none;}","#bit-events a.bit-track-artist-header .bit-invert { display: inline-block; padding: 2px 20px; margin-bottom: 2px; }","#bit-events tr[data-bit-event-id] td { cursor: pointer; }"].join(""),VERSION:t}),n.Utils.Document.contentLoaded(this,n.Utils.Widget.renderAll);var l=document.getElementsByTagName("script"),c=l[l.length-1];n.setup(c)}).call(this);